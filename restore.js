const drawCanvas = document.getElementById("draw_canvas");
const ctx = drawCanvas.getContext("2d");
ctx.moveTo(0, 0);
let index = 1;
window.onclick=function() {
    const stroke = [[124,115],[124,115],[124,115],[123,114],[124,112],[124,111],[125,110],[126,109],[129,109],[130,110],[132,113],[132,116],[132,118],[132,120],[132,124],[131,126],[131,126],[130,127],[130,127],[130,127],[130,127],[131,127],[132,127],[134,126],[135,126],[138,125],[140,124],[140,124],[141,123],[137,105],[137,106],[137,109],[136,111],[136,113],[136,115],[136,115],[138,116],[141,116],[143,116],[145,115],[147,115],[148,114],[149,114],[149,114],[138,106],[140,109],[141,111],[142,114],[145,119],[146,121],[146,121],[148,123],[148,123],[149,123],[149,123],[153,109],[153,109],[154,110],[157,119],[157,119],[159,118],[159,118],[160,117],[161,115],[164,101],[164,101],[162,106],[162,109],[162,110],[162,111],[162,112],[163,112],[164,112],[165,112],[169,112],[171,111],[172,111],[173,110],[174,110],[162,103],[162,104],[163,105],[164,107],[165,109],[169,115],[169,115],[171,118],[172,119],[173,119],[173,119],[173,119],[173,103],[173,103],[173,103],[173,103],[174,102],[175,101],[176,101],[177,102],[178,103],[179,105],[179,106],[179,109],[177,114],[176,115],[176,115],[176,116],[176,116],[176,116],[179,115],[181,114],[182,113],[184,113],[186,112],[187,112],[188,112],[189,112],[131,141],[131,141],[131,141],[131,141],[132,144],[133,148],[134,150],[135,152],[136,154],[137,155],[137,155],[139,143],[139,143],[139,142],[140,142],[142,141],[143,141],[145,142],[146,144],[147,146],[147,149],[146,153],[144,155],[143,157],[143,157],[143,157],[144,156],[146,155],[148,154],[149,153],[151,152],[154,150],[155,149],[160,139],[160,139],[160,139],[160,139],[161,139],[163,147],[163,147],[164,147],[165,146],[167,145],[170,134],[170,133],[171,132],[172,132],[174,132],[175,132],[176,134],[175,139],[175,140],[173,143],[172,145],[172,146],[172,146],[173,146],[174,146],[175,145],[177,144],[179,143],[181,142],[183,141],[187,129],[187,131],[188,135],[189,138],[191,141],[146,168],[146,168],[145,168],[144,170],[142,174],[142,177],[141,178],[141,179],[141,179],[142,179],[144,179],[147,179],[151,178],[153,178],[156,176],[157,175],[159,174],[159,173],[160,173],[145,165],[145,165],[146,168],[148,172],[149,175],[152,180],[154,183],[155,185],[156,186],[157,186],[157,186],[163,168],[163,168],[163,168],[163,168],[164,168],[166,169],[167,178],[167,178],[167,179],[169,178],[170,178],[173,163],[173,163],[173,163],[176,167],[177,168],[180,168],[181,168],[181,168],[175,165],[175,163],[176,161],[179,158],[184,155],[185,154],[187,153],[188,153],[189,155],[190,159],[189,169],[189,175],[190,178],[192,178],[356,153],[356,153],[356,153],[356,152],[352,159],[351,160],[346,169],[344,174],[344,174],[345,175],[348,175],[353,174],[356,172],[361,171],[364,169],[366,168],[366,167],[355,155],[355,157],[356,160],[356,166],[357,172],[357,175],[358,178],[359,179],[359,180],[360,180],[361,180],[371,161],[371,161],[371,161],[371,161],[373,162],[371,175],[371,175],[371,175],[372,175],[376,174],[377,173],[383,159],[383,159],[383,159],[383,159],[386,161],[387,161],[382,159],[382,159],[385,156],[389,153],[392,151],[394,150],[396,149],[399,149],[400,151],[400,153],[400,162],[399,168],[399,173],[399,174],[399,175],[399,175],[399,175]];
    index = restoreStroke(stroke, index);
}

function restoreStroke(stroke, i) {
    console.log(i + ":" + stroke.length);
    i++;
    while (i <= stroke.length) {
        // ctx.fillRect(array[i][0] - 10, array[i][1] - 10, 3, 3);
        ctx.lineWidth = 3;
        if ((Math.abs(stroke[i][0] - stroke[i-1][0]) > 3) && (Math.abs(stroke[i][1] - stroke[i-1][1]) > 3)) {
            break;
        } else {
            ctx.moveTo(stroke[i][0]-10, stroke[i][1]-10);
        }
        ctx.lineTo(stroke[i-1][0]-10, stroke[i-1][1]-10);
        ctx.stroke();
        i++;
    }
    return i;
}

function sleep(waitMsec) {
    var startMsec = new Date();

    // 指定ミリ秒間だけループさせる（CPUは常にビジー状態）
    while (new Date() - startMsec < waitMsec);
}